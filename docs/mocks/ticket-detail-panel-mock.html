<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ticket Detail Panel Mock</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<style>
  :root {
    --surface: #141218;
    --surface-dim: #0e0c11;
    --surface-container-low: #1d1b20;
    --surface-container-high: #2b2930;
    --surface-container-highest: #36343b;
    --on-surface: #e6e0e9;
    --on-surface-variant: #cac4d0;
    --outline: #948f99;
    --outline-variant: #49454f;
    --primary: #d0bcff;
    --primary-container: #4f378b;
    --on-primary: #381e72;
    --secondary-container: #4a4458;
    --error: #f2b8b5;

    --green: #4caf50;
    --blue: #42a5f5;
    --orange: #ffa726;
    --amber: #ffca28;
    --red: #ef5350;
    --purple: #ce93d8;
    --teal: #4db6ac;
    --grey: #9e9e9e;

    --font-mono: 'JetBrains Mono', monospace;
    --font-system: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    background: var(--surface-dim);
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    padding: 40px 20px;
    font-family: var(--font-system);
  }

  .detail-panel {
    width: 700px;
    background: var(--surface);
    border-radius: 4px;
    border: 1px solid var(--outline-variant);
    padding: 32px;
  }

  /* ── Header ── */
  .detail-header {
    display: flex;
    gap: 12px;
    align-items: flex-start;
    margin-bottom: 16px;
  }

  .status-icon-large {
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 8px;
    flex-shrink: 0;
  }
  .status-icon-large.active {
    background: rgba(66,165,245,0.15);
    color: var(--blue);
  }
  .status-icon-large .mi { font-size: 24px; }

  .header-text { flex: 1; }
  .header-text .ticket-id {
    font-family: var(--font-mono);
    font-size: 11px;
    color: var(--on-surface-variant);
  }
  .header-text .ticket-title {
    font-size: 22px;
    font-weight: 600;
    color: var(--on-surface);
    margin-top: 2px;
  }

  .header-actions { display: flex; gap: 8px; flex-shrink: 0; }

  .btn-outlined {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 8px 12px;
    border: 1px solid rgba(73,69,79,0.5);
    border-radius: 8px;
    background: transparent;
    color: var(--on-surface-variant);
    font-size: 12px;
    font-family: var(--font-system);
    cursor: pointer;
  }
  .btn-outlined:hover { background: rgba(208,188,255,0.08); }
  .btn-outlined .mi { font-size: 16px; }

  .btn-icon-only {
    width: 32px; height: 32px;
    display: flex; align-items: center; justify-content: center;
    border: none; background: none; cursor: pointer;
    color: var(--on-surface-variant); border-radius: 6px;
  }
  .btn-icon-only:hover { background: rgba(208,188,255,0.08); }
  .btn-icon-only .mi { font-size: 18px; }

  /* ── Metadata pills ── */
  .metadata-row {
    display: flex;
    flex-wrap: wrap;
    gap: 10px;
    margin-bottom: 8px;
  }

  .meta-pill {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 8px;
    border-radius: 8px;
    font-size: 11px;
    font-weight: 500;
  }
  .meta-pill .mi { font-size: 12px; }
  .meta-pill.status-active { background: rgba(66,165,245,0.15); border: 0.5px solid rgba(66,165,245,0.4); color: var(--blue); }
  .meta-pill.kind-feature { background: rgba(156,39,176,0.15); border: 0.5px solid rgba(156,39,176,0.4); color: #ba68c8; }
  .meta-pill.priority-medium { background: rgba(255,167,38,0.15); border: 0.5px solid rgba(255,167,38,0.4); color: var(--orange); }
  .meta-pill.category { background: rgba(208,188,255,0.15); border: 0.5px solid rgba(208,188,255,0.4); color: var(--primary); }

  .tag-row { display: flex; gap: 4px; margin-bottom: 24px; }
  .tag-chip {
    padding: 1px 6px;
    border-radius: 8px;
    font-size: 10px;
    font-weight: 500;
  }
  .tag-chip.auth { background: rgba(77,182,172,0.15); border: 0.5px solid rgba(77,182,172,0.4); color: var(--teal); }
  .tag-chip.security { background: rgba(239,83,80,0.15); border: 0.5px solid rgba(239,83,80,0.4); color: var(--red); }

  /* ── Section ── */
  .section { margin-bottom: 24px; }

  .section-header {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
  }
  .section-header .label {
    font-size: 11px;
    font-weight: 600;
    color: var(--on-surface-variant);
    white-space: nowrap;
  }
  .section-header .line {
    flex: 1;
    height: 1px;
    background: rgba(73,69,79,0.3);
  }

  .section-card {
    padding: 12px;
    background: var(--surface-container-low);
    border-radius: 8px;
    border: 1px solid rgba(73,69,79,0.3);
  }

  .section-card p {
    font-size: 13px;
    color: var(--on-surface);
    line-height: 1.5;
    white-space: pre-line;
  }

  /* ── Dependencies ── */
  .dep-row {
    display: flex;
    align-items: flex-start;
    gap: 4px;
    margin-bottom: 10px;
  }
  .dep-row:last-child { margin-bottom: 0; }
  .dep-label {
    width: 80px;
    font-size: 11px;
    font-weight: 500;
    color: var(--on-surface-variant);
    padding-top: 4px;
    flex-shrink: 0;
  }
  .dep-chips { display: flex; flex-wrap: wrap; gap: 8px; }
  .dep-chip {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 3px 8px;
    background: rgba(54,52,59,0.5);
    border-radius: 6px;
    border: 1px solid rgba(73,69,79,0.3);
    cursor: pointer;
  }
  .dep-chip:hover { background: rgba(208,188,255,0.08); }
  .dep-chip .mi { font-size: 12px; }
  .dep-chip .mi.done { color: var(--green); }
  .dep-chip .mi.waiting { color: var(--on-surface-variant); }
  .dep-chip .id {
    font-family: var(--font-mono);
    font-size: 10px;
    color: var(--primary);
  }

  /* ── Linked work ── */
  .link-row {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 8px;
  }
  .link-row:last-child { margin-bottom: 0; }
  .link-row .mi { font-size: 14px; color: var(--on-surface-variant); }
  .link-row .link-text { font-size: 13px; color: var(--primary); }

  .spinner {
    width: 10px; height: 10px;
    border: 1.5px solid transparent;
    border-top-color: var(--primary);
    border-radius: 50%;
    animation: spin 1s linear infinite;
  }
  @keyframes spin { to { transform: rotate(360deg); } }

  .status-badge-small {
    padding: 1px 6px;
    border-radius: 8px;
    font-size: 10px;
    font-weight: 500;
    background: rgba(66,165,245,0.15);
    border: 0.5px solid rgba(66,165,245,0.4);
    color: var(--blue);
  }

  /* ── Actions ── */
  .actions-row {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    margin-bottom: 24px;
  }

  .btn-filled {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    border: none;
    border-radius: 8px;
    background: var(--primary);
    color: var(--on-primary);
    font-size: 12px;
    font-weight: 500;
    font-family: var(--font-system);
    cursor: pointer;
  }
  .btn-filled:hover { filter: brightness(1.1); }
  .btn-filled .mi { font-size: 16px; }

  .btn-action-outlined {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 10px 16px;
    border: 1px solid rgba(73,69,79,0.5);
    border-radius: 8px;
    background: transparent;
    color: var(--on-surface);
    font-size: 12px;
    font-family: var(--font-system);
    cursor: pointer;
  }
  .btn-action-outlined:hover { background: rgba(208,188,255,0.08); }
  .btn-action-outlined .mi { font-size: 16px; }

  /* ── Cost & Time ── */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
  }
  .stat-item .stat-label {
    font-size: 10px;
    color: var(--on-surface-variant);
    margin-bottom: 4px;
  }
  .stat-item .stat-value {
    font-family: var(--font-mono);
    font-size: 11px;
    color: var(--on-surface);
  }
</style>
</head>
<body>

<div class="detail-panel">
  <!-- Header -->
  <div class="detail-header">
    <div class="status-icon-large active">
      <span class="mi material-icons">play_circle_outline</span>
    </div>
    <div class="header-text">
      <div class="ticket-id">TKT-004</div>
      <div class="ticket-title">Implement token refresh</div>
    </div>
    <div class="header-actions">
      <button class="btn-outlined">
        <span class="mi material-icons">edit</span>
        Edit
      </button>
      <button class="btn-icon-only">
        <span class="mi material-icons">more_vert</span>
      </button>
    </div>
  </div>

  <!-- Metadata -->
  <div class="metadata-row">
    <span class="meta-pill status-active"><span class="mi material-icons">play_circle_outline</span> active</span>
    <span class="meta-pill kind-feature"><span class="mi material-icons">star_outline</span> feature</span>
    <span class="meta-pill priority-medium"><span class="mi material-icons">signal_cellular_alt</span> medium</span>
    <span class="meta-pill category"><span class="mi material-icons">category</span> Auth &amp; Permissions</span>
  </div>

  <div class="tag-row">
    <span class="tag-chip auth">auth</span>
    <span class="tag-chip security">security</span>
  </div>

  <!-- Description -->
  <div class="section">
    <div class="section-header">
      <span class="label">Description</span>
      <div class="line"></div>
    </div>
    <div class="section-card">
      <p>Implement automatic token refresh using the refresh token stored in secure storage. Handle edge cases:

&#8226; Token expiry during active request
&#8226; Refresh token rotation
&#8226; Network failure during refresh
&#8226; Concurrent refresh attempts (debounce)

The refresh logic should be transparent to calling code — wrap the HTTP client so retries happen automatically on 401.</p>
    </div>
  </div>

  <!-- Dependencies -->
  <div class="section">
    <div class="section-header">
      <span class="label">Dependencies</span>
      <div class="line"></div>
    </div>
    <div class="section-card">
      <div class="dep-row">
        <span class="dep-label">Depends on</span>
        <div class="dep-chips">
          <span class="dep-chip" title="Design auth data model">
            <span class="mi material-icons done">check_circle</span>
            <span class="id">TKT-002</span>
          </span>
          <span class="dep-chip" title="Decide: session vs JWT?">
            <span class="mi material-icons done">check_circle</span>
            <span class="id">TKT-007</span>
          </span>
        </div>
      </div>
      <div class="dep-row">
        <span class="dep-label">Blocks</span>
        <div class="dep-chips">
          <span class="dep-chip" title="Add permission middleware">
            <span class="mi material-icons waiting">radio_button_unchecked</span>
            <span class="id">TKT-005</span>
          </span>
          <span class="dep-chip" title="Write auth integration tests">
            <span class="mi material-icons waiting">radio_button_unchecked</span>
            <span class="id">TKT-006</span>
          </span>
        </div>
      </div>
    </div>
  </div>

  <!-- Linked Work -->
  <div class="section">
    <div class="section-header">
      <span class="label">Linked Work</span>
      <div class="line"></div>
    </div>
    <div class="section-card">
      <div class="link-row">
        <span class="mi material-icons">account_tree</span>
        <span class="link-text">feat/token-refresh</span>
        <div class="spinner"></div>
      </div>
      <div class="link-row">
        <span class="mi material-icons">chat_bubble_outline</span>
        <span class="link-text">"Implementing token refresh"</span>
        <span class="status-badge-small">active</span>
      </div>
    </div>
  </div>

  <!-- Actions -->
  <div class="section">
    <div class="section-header">
      <span class="label">Actions</span>
      <div class="line"></div>
    </div>
    <div class="actions-row">
      <button class="btn-filled">
        <span class="mi material-icons">play_arrow</span>
        Begin in new worktree
      </button>
      <button class="btn-action-outlined">
        <span class="mi material-icons">play_arrow</span>
        Begin in worktree&hellip;
      </button>
      <button class="btn-action-outlined">
        <span class="mi material-icons">chat</span>
        Open linked chat
      </button>
      <button class="btn-action-outlined">
        <span class="mi material-icons">call_split</span>
        Split into subtasks
      </button>
    </div>
  </div>

  <!-- Cost & Time -->
  <div class="section">
    <div class="section-header">
      <span class="label">Cost &amp; Time</span>
      <div class="line"></div>
    </div>
    <div class="section-card">
      <div class="stats-grid">
        <div class="stat-item">
          <div class="stat-label">Tokens</div>
          <div class="stat-value">45.2k in / 12.1k out</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Cost</div>
          <div class="stat-value">$0.42</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Agent time</div>
          <div class="stat-value">3m 22s</div>
        </div>
        <div class="stat-item">
          <div class="stat-label">Waiting</div>
          <div class="stat-value">1m 05s</div>
        </div>
      </div>
    </div>
  </div>

</div>

</body>
</html>
